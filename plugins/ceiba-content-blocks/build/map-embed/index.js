(()=>{"use strict";var e,t={187:()=>{const e=window.wp.blocks,t=window.React,a=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,l=window.wp.data;(0,e.registerBlockType)("ceiba/map-embed",{edit:function({attributes:e,setAttributes:c,clientId:s}){const{mapsUrl:i}=e,m=(0,r.useMemo)(()=>function(e){if(!e)return"";try{const t=new URL(e);if(t.hostname.includes("google")&&t.pathname.includes("/maps")&&(t.pathname.includes("/embed")||t.searchParams.get("pb")))return e;const a=t.href.match(/@(-?\d+(\.\d+)?),(-?\d+(\.\d+)?),(\d+(\.\d+)?)z/);return a?`https://www.google.com/maps?output=embed&ll=${a[1]},${a[3]}&z=${Math.round(parseFloat(a[5]))}`:t.searchParams.get("q")?`https://www.google.com/maps?output=embed&q=${encodeURIComponent(t.searchParams.get("q"))}`:`https://www.google.com/maps?output=embed&q=${encodeURIComponent(e)}`}catch(t){return`https://www.google.com/maps?output=embed&q=${encodeURIComponent(e)}`}}(i),[i]),p=(0,r.useMemo)(()=>{try{return new URL(i).hostname.includes("maps.app.goo.gl")}catch{return!1}},[i]),d=(0,l.useSelect)(e=>e(o.store).isBlockSelected(s),[s]),[u,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!d&&u&&b(!1)},[d,u]);const w=(0,o.useBlockProps)({className:"cb-mapembed"});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.BlockControls,null,(0,t.createElement)(n.ToolbarButton,{icon:"move",isPressed:u,onClick:()=>b(e=>!e),label:u?(0,a.__)("Disable Map","ceiba"):(0,a.__)("Enable Map","ceiba"),text:u?(0,a.__)("Map On","ceiba"):(0,a.__)("Map Off","ceiba")})),(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Map","ceiba"),initialOpen:!0},(0,t.createElement)(n.TextControl,{label:(0,a.__)("Google Maps Share URL","ceiba"),value:i,onChange:e=>c({mapsUrl:e}),placeholder:"https://maps.app.goo.gl/..."}),p&&(0,t.createElement)(n.Notice,{status:"info",isDismissible:!1},(0,a.__)('Short links will embed. For exact map focus, paste the "Embed a map" URL (/maps/embed?pb=...).',"ceiba")))),(0,t.createElement)("div",{...w},m?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("iframe",{src:m,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",allowFullScreen:!0,title:"Map",style:{pointerEvents:u?"auto":"none"}}),!u&&(0,t.createElement)("div",{className:"cb-mapembed__overlay"},(0,a.__)("Map preview locked â€” use toolbar to enable","ceiba"))):(0,t.createElement)("div",{className:"cb-mapembed__placeholder"},(0,a.__)("Add a Google Maps Share URL in the sidebar","ceiba"))))},save:function({attributes:e}){const{mapsUrl:a}=e,n=function(e){if(!e)return"";try{const t=new URL(e);return t.hostname.includes("google")&&t.pathname.includes("/maps")&&(t.pathname.includes("/embed")||t.searchParams.get("pb"))?e:"https://www.google.com/maps?output=embed&q="+encodeURIComponent(e)}catch(t){return"https://www.google.com/maps?output=embed&q="+encodeURIComponent(e)}}(a);return(0,t.createElement)("div",{...o.useBlockProps.save({className:"cb-mapembed"})},n?(0,t.createElement)("iframe",{src:n,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",allowFullScreen:!0,title:"Map"}):null)}})}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,a,n,r)=>{if(!a){var l=1/0;for(m=0;m<e.length;m++){for(var[a,n,r]=e[m],c=!0,s=0;s<a.length;s++)(!1&r||l>=r)&&Object.keys(o.O).every(e=>o.O[e](a[s]))?a.splice(s--,1):(c=!1,r<l&&(l=r));if(c){e.splice(m--,1);var i=n();void 0!==i&&(t=i)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[a,n,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={570:0,926:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[l,c,s]=a,i=0;if(l.some(t=>0!==e[t])){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(s)var m=s(o)}for(t&&t(a);i<l.length;i++)r=l[i],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(m)},a=globalThis.webpackChunkceiba_content_blocks=globalThis.webpackChunkceiba_content_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=o.O(void 0,[926],()=>o(187));n=o.O(n)})();